# Pi5 Trading System - Go Implementation Configuration

server:
  host: "0.0.0.0"
  port: 8080
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s
  cors_allowed_origins: "*"  # Development only! Use CORS_ALLOWED_ORIGINS env var in production

auth:
  # SECURITY WARNING: Set JWT_SECRET environment variable in production!
  # This default is for development/testing only
  jwt_secret: "dev-only-jwt-secret-DO-NOT-USE-IN-PRODUCTION"
  access_token_ttl: "15m"
  refresh_token_ttl: "168h"  # 7 days

database:
  host: "timescaledb"  # Docker service name (use "localhost" for local dev)
  port: 5432
  user: "pi5trader"
  # SECURITY WARNING: Set DB_PASSWORD environment variable in production!
  # This default is for development/testing only
  password: "dev-only-password-DO-NOT-USE"
  database: "pi5_trading"
  max_conns: 25
  min_conns: 5
  max_conn_life: 5m

redis:
  host: "redis"  # Docker service name (use "localhost" for local dev)
  port: 6379
  password: ""
  db: 0

trading:
  initial_cash: 100000.0
  demo_mode: true
  paper_trading: true
  event_bus_buffer: 1000  # Channel buffer size for event bus

  strategies:
    # Moving Average Crossover (original strategy)
    - id: "moving_avg_crossover"
      name: "Moving Average Crossover"
      enabled: false  # Disable to test new strategies
      symbols:
        - "AAPL"
        - "MSFT"
        - "GOOGL"
      params:
        short_period: 20
        long_period: 50

    # RSI Mean Reversion (Day Trading)
    # Entry: RSI < 30 (oversold) → BUY
    # Exit: RSI > 70 (overbought) OR RSI > 50 → SELL
    # Best for: 1-5 min bars, high volume stocks
    - id: "rsi_mean_reversion"
      name: "RSI Mean Reversion"
      enabled: true
      symbols:
        - "SPY"   # S&P 500 ETF (very liquid)
        - "QQQ"   # NASDAQ ETF (very liquid)
      params:
        rsi_period: 14
        oversold_threshold: 30
        overbought_threshold: 70

    # Bollinger Band Bounce (Day Trading)
    # Entry: Price touches lower band → BUY (bounce)
    # Exit: Price returns to middle OR touches upper band → SELL
    # Best for: 5 min bars, volatile stocks
    - id: "bollinger_bounce"
      name: "Bollinger Band Bounce"
      enabled: false
      symbols:
        - "AAPL"
        - "TSLA"
      params:
        period: 20
        std_dev: 2.0

    # VWAP Bounce (Intraday Trading)
    # Entry: Price bounces off VWAP in uptrend → BUY
    # Exit: Target profit OR price crosses below VWAP → SELL
    # Best for: 1-5 min bars, trending stocks
    - id: "vwap_bounce"
      name: "VWAP Bounce"
      enabled: false
      symbols:
        - "AAPL"
        - "MSFT"
        - "GOOGL"
      params:
        bounce_tolerance: 0.3  # % from VWAP to consider bounce
        target_profit: 1.0     # % profit target
        ema_period: 20         # For trend detection

    # Opening Range Breakout (Market Open Strategy)
    # Entry: Price breaks above first 15-min high → BUY
    # Exit: Stop loss OR end of day (3:55 PM)
    # Best for: Market open (9:30-10:00 AM ET), volatile stocks
    - id: "opening_range_breakout"
      name: "Opening Range Breakout"
      enabled: false
      symbols:
        - "SPY"
        - "QQQ"
        - "AAPL"
      params:
        range_minutes: 15  # 15 or 30 minutes
        atr_period: 14     # For stop loss calculation

# Market Data Configuration
market_data:
  # Provider: "alpaca" or "simulated"
  provider: "alpaca"

  # Alpaca API credentials (get free account at alpaca.markets)
  # IMPORTANT: Set ALPACA_API_KEY and ALPACA_API_SECRET environment variables!
  # Never commit real API keys to version control
  alpaca:
    api_key: ""  # Set via ALPACA_API_KEY env var
    api_secret: ""  # Set via ALPACA_API_SECRET env var
    data_url: "https://data.alpaca.markets"
    stream_url: "wss://stream.data.alpaca.markets"
    paper_trading: true  # Use paper trading endpoint
    feed_type: "iex"  # "iex" (free) or "sip" (paid, $99+/month)

  # Reconnection settings
  reconnection:
    max_attempts: 10
    initial_delay: 2s
    max_delay: 30s

  # Historical data backfill on startup
  backfill:
    enabled: true
    lookback_days: 7  # Load 7 days of historical data
    timeframe: "1Min"  # "1Min", "5Min", "15Min", "1H", "1D"
    publish_events: true  # Publish to event bus for strategy warm-up

  # Simulated data settings (when provider: "simulated")
  simulated:
    enabled: false
    tick_interval: 5s
    symbols:
      - symbol: "AAPL"
        base_price: 150.0
      - symbol: "MSFT"
        base_price: 350.0
      - symbol: "GOOGL"
        base_price: 140.0

logging:
  level: "info"  # debug, info, warn, error
  format: "json"  # json or console
  time_format: "2006-01-02T15:04:05Z07:00"
